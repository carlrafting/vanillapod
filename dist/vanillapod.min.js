var e="0.9.0";function o(e=!1){return e?window.VANILLAPOD_DEBUG=e:window.VANILLAPOD_DEBUG}let t=[];var n=e=>{if(o())throw e;t[e]={exception:e}};function r(e=null){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function l(e=null,o=(()=>{})){e||n(new Error("Expected parent parameter to be set, was "+e));e.childNodes.length>0&&e.childNodes.forEach(e=>{if(e.nodeType===Node.ELEMENT_NODE){e.childNodes.length>0&&l(e,e=>{o(e)}),o(e)}})}const c="_vanillapod_hooks";function i(e,{hooks:t={}}){if(t)return e[c]?void(o()&&console.log("Hooks already registered for "+e)):(o()&&console.log("Registering hooks for "+e),void(e[c]=t))}function s(e,o){const t=e[c];t[o]||(t[o]=o)}function a(e,t,...n){const r=e[c];r?t&&r[t]&&(o()&&console.log(`Triggering hook ${t} for ${e}`),r[t](n)):o()&&console.log("No hooks registered for "+e)}function f(e,o=""){""!==o&&l(e,e=>{const t=e._vanillapod_hooks;t&&Object.keys(t).length>0&&t&&t.before&&a(e,o)})}function u(e,{props:o,properties:t}){if(o||t){o||(o=t,t={});for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}}function p(e,{attributes:t,attrs:n,classList:r,classNames:l,data:c}){if(o()&&console.log("Setting attributes for "+e),(r||l)&&(r||(r=l,l=[]),r.forEach(o=>{e.classList.add(o)})),c)for(const o in c)Object.prototype.hasOwnProperty.call(c,o)&&(Array.isArray(o)&&p(e,o),e.dataset[o]=c[o]);if(n||t){if(n||(n=t,t=null),"function"==typeof n){const o=n();return void p(e,{...o})}if("object"==typeof n){o()&&console.log(n);for(const o in n)"object"==typeof o&&p(e,o),Object.prototype.hasOwnProperty.call(n,o)&&o in e&&e.setAttribute(""+o,n[o]);return}n.forEach(o=>{e.setAttribute(o)})}}function d(e,{text:o}){o&&""!==o&&e.appendChild(document.createTextNode(o))}function g(e,{events:o,on:t}){if(t||o){t||(t=o,o={});for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.addEventListener(""+o,t[o],!1)}}const h={element:null,el:null,data:{},classList:[],classNames:[],attributes:{},attrs:{},properties:{},props:{},children:[],text:null,events:{},on:{},hooks:{}};function m(e){if(o()&&console.log(`Creating ${e.element||e.el} for ${e.elementCreatorFunction}`),e.el||e.element){let t;return e.el||(e.el=e.element,e.element=null),"string"==typeof e.el?(o()&&console.log("Creating element..."),t=document.createElement(e.el),o()&&console.log("Created element: ",t)):t=e.el,t||n(new Error("element is "+t)),[t,e]}n(new Error("No element specified on "+e))}function y(e){if("function"==typeof e){o()&&console.log(`Registering ${e}...`);const t=e();if("object"!=typeof t&&n(new Error(e+" must return an object")),function(e){for(const o in e)Object.prototype.hasOwnProperty.call(h,o)||n(new Error(o+" is not a valid property name. Try one of the following instead: "+Object.keys(h)));return!0}(t))return{elementCreatorFunction:e,...t}}n(new Error(e+" is not a function"))}function b(e){const[o,t]=m(e);return console.log("elementHelper: elProps",t),u(o,t),p(o,t),d(o,t),g(o,t),o}function E(e,{children:t}){t&&t.length>0&&t.map(t=>{const n=y(t),[r,l]=m(n);o()&&console.log("childInstance",n)&&console.log("childElement",r)&&console.log("childProps",l),u(r,l),p(r,l),d(r,l),g(r,l),i(r,l),l.children&&E(r,l),e.appendChild(r)})}function w(e,...o){o.forEach(o=>{"function"!==r(o)&&n(new Error("arg must be a function"));const t=y(o);let{el:l,element:c}=t;l||(l=c,c=null),"string"===r(l)&&(l=b(t),E(l,t),i(l,t));const s=l._vanillapod_hooks;if(f(l,"before"),s&&s.before&&a(l,"before"),e&&e.insertBefore(l,null),!e){const e=document.querySelector("body");e.insertBefore(l,e.lastChild)}s&&s.mount&&a(l,"mount"),f(l,"mount")})}function O(){n(new Error("unmount yet to be implemented!"))}function N(e={}){const o=document.createDocumentFragment();return u(o,e),d(o,e),g(o,e),[o,e]}export{N as createDocumentFragment,m as createElement,o as debug,b as elementHelper,w as mount,y as registerElement,s as registerHook,i as registerHooks,p as setElementAttributes,E as setElementChildren,g as setElementEventHandlers,u as setElementProperties,d as setElementTextContent,a as triggerHook,O as unmount,e as version};
