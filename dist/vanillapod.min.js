var e="0.12.0";function o(e=!1){return e?window.VANILLAPOD_DEBUG=e:window.VANILLAPOD_DEBUG}let t=[];var n=e=>{if(o()&&e)throw e;t.push({exception:e})};function r(e=null){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}const l="_vanillapod_hooks";function c(e,{hooks:t={}}){if(t)return e[l]?void(o()&&console.log(`Hooks already registered for ${e}`)):(o()&&console.log(`Registering hooks for ${e}`),void(e[l]=t))}function i(e,o){const t=e[l];t[o]||(t[o]=o)}function s(e,t,...n){const r=e[l];r?t&&r[t]&&(o()&&console.log(`Triggering hook ${t} for ${e}`),r[t](n)):o()&&console.log(`No hooks registered for ${e}`)}function a(e,{props:o,properties:t}){if(o||t){o||(o=t,t={});for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}}function f(e,{attributes:t,attrs:n,classList:r,classNames:l,data:c}){if(o()&&console.log(`Setting attributes for ${e}`),(r||l)&&(r||(r=l,l=[]),r.forEach((o=>{e.classList.add(o)}))),c)for(const o in c)Object.prototype.hasOwnProperty.call(c,o)&&(Array.isArray(o)&&f(e,o),e.dataset[o]=c[o]);if(n||t){if(n||(n=t,t=null),"function"==typeof n){const o=n();return void f(e,{...o})}if("object"==typeof n){o()&&console.log(n);for(const o in n)"object"==typeof o&&f(e,o),Object.prototype.hasOwnProperty.call(n,o)&&o in e&&e.setAttribute(`${o}`,n[o]);return}n.forEach((o=>{e.setAttribute(o)}))}}function u(e,{text:o}){o&&""!==o&&e.appendChild(document.createTextNode(o))}function p(e,{events:o,on:t}){if(t||o){t||(t=o,o={});for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.addEventListener(`${o}`,t[o],!1)}}const d={element:null,el:null,data:{},classList:[],classNames:[],attributes:{},attrs:{},properties:{},props:{},children:[],text:null,events:{},on:{},hooks:{}};function g(e){if(o()&&console.log(`Creating ${e.element||e.el} for ${e.vanillapodComponent}`),e.el||e.element){let t;return e.el||(e.el=e.element,e.element=null),"string"==typeof e.el?(o()&&console.log("Creating element..."),t=document.createElement(e.el),o()&&console.log("Created element: ",t)):t=e.el,t?[t,e]:n(new Error(`element is ${t}`))}return n(new Error(`No element specified on ${e}`))}function m(e,t){if("function"==typeof e){o()&&console.log(`Registering ${e}...`);const r=t?e(t):e();if("object"!=typeof r||void 0===r)return n(new Error(`${e} must return an object`));if(function(e){for(const o in e)Object.prototype.hasOwnProperty.call(d,o)||n(new Error(`${o} is not a valid property name. Try one of the following instead: `+Object.keys(d)));return!0}(r))return{vanillapodComponent:e,...r}}return n(new Error(`${e} is not a function`))}function h(e){const[t,n]=g(e);return o()&&console.log("elementHelper: elProps",n),a(t,n),f(t,n),u(t,n),p(t,n),t}function y(e,...o){let t,l=0,i={};const a=o.length;for(;l<a;l+=1){const a=o[l];if("array"===r(a)&&([t,i]=a),"function"===r(a)&&(t=a),"object"===r(a)&&(t=()=>a),!t)return n(new Error("Could not determine component format"));const f=m(t,i);if(!f)return n(new Error(`Could not create instance for ${t}`));let{el:u,element:p}=f;u||(u=p,p=null),"string"===r(u)&&(u=h(f)),f.children&&f.children.length>0&&y(u,...f.children),c(u,f);const d=u._vanillapod_hooks;d&&d.before&&s(u,"before"),e&&e.insertBefore(u,null),!e&&document.body&&document.body.insertBefore(u,document.body.lastChild),d&&d.mount&&s(u,"mount")}}function b(e,{children:t}){t&&t.length>0&&t.map((t=>{const n=m(t),[r,l]=g(n);o()&&console.log("childInstance",n)&&console.log("childElement",r)&&console.log("childProps",l),a(r,l),f(r,l),u(r,l),p(r,l),c(r,l),l.children&&b(r,l),e.appendChild(r)}))}function w(e={}){const o=document.createDocumentFragment();return a(o,e),u(o,e),p(o,e),[o,e]}export{w as createDocumentFragment,g as createElement,o as debug,h as elementHelper,t as errors,y as mount,m as registerElement,i as registerHook,c as registerHooks,f as setElementAttributes,b as setElementChildren,p as setElementEventHandlers,a as setElementProperties,u as setElementTextContent,s as triggerHook,e as version};
